#dialogs {
  container: dialogs / inline-size;
}

.dialog {
  container: dialog / inline-size;
  inline-size: 100%;
  max-inline-size: 60ch;

  accent-color: transparent;

  select {
    padding-inline: var(--size-1);
  }

  > form {
    inline-size: 100%;

    > header {
      grid-template-columns: 1fr max-content;
      gap: unset;
      border-block-end: 1px solid var(--gray-2);

      > fieldset.system {
        grid-template-columns: 1fr 1fr;
        font-size: var(--font-size-0);
        grid-column: 1/-1;
        border: unset;
        padding: unset;
        padding-block-end: var(--size-1);
        font-weight: var(--font-weight-2);
        div {
          display: none;
          align-items: center;
          &:nth-of-type(2) {
            input {
              text-align: end;
            }
          }
        }
        input {
          inline-size: 100%;
          background-color: transparent;
          padding-inline: var(--size-1);
          padding-block: unset;
        }
        .bicp {
          font-size: var(--font-size-1);
          opacity: 0.5;
        }
      }
    }

    > footer {
      margin-block-start: var(--size-2);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;

      #delete-action {
        display: none;
        span:first-of-type {
          color: red;
        }
      }

      @container dialog (min-width: 360px) {
        justify-content: space-between;
      }
    }
  }

  .dialog-inputs {
    border: unset;
    padding: unset;

    --_grid-layout: 1fr;
    --_grid-gap: var(--size-3);
    --_image-column-start: 1;
    --_image-row-start: 1;
    --_image-row-end: span 4;

    grid-template-columns: var(--_grid-layout);
    grid-auto-rows: min-content;
    gap: var(--_grid-gap);

    @container dialog (min-width: 320px) {
      --_grid-layout: 2fr 1fr;
    }

    > * {
      grid-column: 1;
    }

    > div {
      display: none;
      align-items: center;
      position: relative;
      span {
        position: absolute;
      }

      input {
        inline-size: 100%;
        background-color: transparent;
      }

      &:last-of-type {
        grid-column: 2;
        span {
          right: 0;
        }
      }
    }

    > [id$='-image'] {
      overflow: hidden;
      position: relative;
      // min-inline-size: 200px;
      max-inline-size: 320px;
      aspect-ratio: 1/2;
      grid-column: var(--_image-column-start);

      @container dialog (min-width: 320px) {
        --_image-column-start: 2;
        aspect-ratio: unset;
        grid-row-start: var(--_image-row-start);
        grid-row-end: var(--_image-row-end);
      }

      > img {
        position: absolute;
        inset: 0;
        inline-size: 100%;
        block-size: 100%;
        object-fit: cover;
      }

      > div {
        display: flex;
        gap: var(--size-2);
        align-items: center;
        opacity: 0.5;
      }
    }

    > [id$='-thumbnail'] {
      display: none;
    }

    > [for$='-psa'] {
      display: none;
    }
  }

  .dialog-collections {
    details {
      position: relative;
      font-size: var(--font-size-1);
      summary {
        font-size: inherit;
      }

      &[open] {
        outline: 1px solid var(--text-1);
      }

      .add-to-collection {
        position: absolute;
        right: var(--size-2);
        top: var(--size-2);
      }
    }
  }

  & > form.update {
    --_image-row-start: 1;

    fieldset.system {
      div {
        display: flex;
      }
    }

    #delete-action {
      display: inline-flex;
    }
  }
}

#error-dialog {
  border: 1px solid red;
  header {
    display: flex;
    p {
      margin-inline: auto;
    }
  }

  section {
    min-block-size: 20vh;
    margin-block: var(--size-3);
    place-content: center;
    border-radius: var(--radius-3);
    box-shadow: var(--shadow-3);
  }

  #error-message {
    font-weight: bolder;
  }

  footer {
    > * {
      place-self: center;
    }
  }
}

#close-dialog,
#close-error-dialog,
.add-to-collection,
.delete-from-collection {
  background-color: transparent;
  padding-block: unset;
  padding-inline: unset;
  border-radius: 50%;
  font-size: var(--font-size-3);
  inline-size: var(--font-size-3);
  block-size: var(--font-size-3);
  border: unset;
}
